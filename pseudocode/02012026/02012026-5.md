### Breakout of Consolidation Box (5m / 15m)

Concept: Detect recent range/consolidation, then enter when price breaks out with volume.

Indicators:

Rolling highest high / lowest low over N candles (e.g. last 20)
Volume SMA

```
timeframe = "5m"

populate_indicators(dataframe):
    lookback = 20
    dataframe.range_high = MAX(high, lookback)
    dataframe.range_low = MIN(low, lookback)
    dataframe.vol_sma = SMA(volume, 20)
    return dataframe

populate_entry_trend(dataframe):

    breakout_up = (
        (close > range_high) AND
        (volume > 1.5 * vol_sma)
    )
    breakout_down = (
        (close < range_low) AND
        (volume > 1.5 * vol_sma)
    )

    dataframe.enter_long = breakout_up
    dataframe.enter_short = breakout_down
    return dataframe

populate_exit_trend(dataframe):

    # simple trailing exit
    exit_long = (
        (close < range_high)                           # back into box
        OR (percentage_profit >= 1.5%)                 # take profit
    )
    exit_short = (
        (close > range_low)
        OR (percentage_profit >= 1.5%)
    )

    dataframe.exit_long = exit_long
    dataframe.exit_short = exit_short
    return dataframe

```
